$(document).ready(function(){
    // Create Collective Memory of WWII visualization
    // Organization ideas from Yusuf Shakeel (Youtube / Chart.js) 
    $.ajax({
        url:  "http://giraffe.psychology.wustl.edu/ruthie/CollectiveMemoryWWII/specificModuleInfo_largeGrain_GroupedAlliesAxis_select.php",
        type: "GET",
        success:  function(data){
            
           //console.log(data);

           var dataObject = eval(data);
       
           var EventName = [];
           var Allies = [];
           var Axis = [];

           for (var i in dataObject) {
          
                EventName.push(dataObject[i].EventName);
                Allies.push(dataObject[i].Allies);
                Axis.push(dataObject[i].Axis);
                           
           }
 
           //Accuracy Chart
           var chartdata = {
                labels: EventName,
                datasets: [
                {
                        label:  'Allies',
                        data: Allies,
                        fill: true,
                       // lineTension: 0.1,
                        backgroundColor: "rgba(255, 0, 26, 0.75)",
                        borderColor: "rgba(255, 0, 26, 0.75)",
                        pointHoverBackgroundColor: "rgba(255, 0, 26, 1)",
                        pointHoverBorderColor: "rgba(255, 0, 26, 1)",
                },{
                        label:  'Axis',
                        data: Axis,
                        fill: true,
                       // lineTension: 0.1,
                        backgroundColor: "rgba(0, 192, 251, 0.75)",
                        borderColor: "rgba(0, 192, 251, 0.75)",
                        pointHoverBackgroundColor: "rgba(0, 192, 251, 1)",
                        pointHoverBorderColor: "rgba(0, 192, 251, 1)",
                }
                ]
           };
           
          
            $('.chartAreaWrapper2').width($('.chartAreaWrapper2').width()+2000);
                            
            var ctx = document.getElementById("myChart").getContext("2d");
        
           var lineGraph = new Chart(ctx, {
                type: 'bar',
                data: chartdata,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                    
                       
                    },
                    elements: {
						rectangle: {
							borderWidth: 1,
							borderColor: 'rgb(0, 255, 0)',
							borderSkipped: 'bottom',
                            
						}
					},
					legend: {
						position: 'left',
                        labels: {
                            fontSize: 10
                        }
					},                 
                    scales: {
                       
                        yAxes: [{
                            scaleLabel: {
                                display: true,
                                labelString: 'Percent (%)',
                                 fontSize: 15
                            },
                            
                            ticks: {
                                max: 100,
                                min: 0,
                                stepSize: 10,
                                fontSize: 12
                            },
                            gridLines: {
                              //display: false
                            }
                        }],
                       
                        xAxes: [{
                            ticks: {
                                autoSkip: false,
                                fontSize: 12
                            },
                            //barThickness: 1,
                            categoryPercentage: .7,
                            barPercentage: 1,
                            scaleLabel: {
                                display: true,
                                labelString: 'Events',
                                fontSize: 15
                                
                            },
                            gridLines: {
                              display: false
                            }
                        }]
                    }
                }
           });
           
        },
        error:  function(data){
            console.log(data); 
        }
        
    });
    
});